<!DOCTYPE module SYSTEM "module.dtd">

<module name="ObstacleAvoidSkySegmentation">
  <doc>
    <description>Video ARDone 2</description>
  </doc>

  <header>
    <file name="video.h"/>
  </header>

  <init fun="video_init()"/>

  <periodic fun="video_receive()" freq="200" start="video_start()" stop="video_stop()" autorun="FALSE"/>
  <makefile>
    <define name="ARDRONE_VIDEO_PORT" value="2002" />
    <define name="USE_ARDRONE_VIDEO" />
<!--    <file name="video.c"/>  -->
      <raw>

VISION_FOLDER = $(PAPARAZZI_HOME)/sw/ext/ardrone2_vision/modules/ObstacleAvoidSkySegmentation
          
$(TARGET).srcs += $(VISION_FOLDER)/video.c
$(TARGET).srcs += $(VISION_FOLDER)/video_ardrone2.c
$(TARGET).srcs += $(VISION_FOLDER)/tcp_socket.c
$(TARGET).CFLAGS += -I$(PAPARAZZI_HOME)/sw/ext/ardrone2_vision/modules

all:
	echo "Compiling libObstacleAvoidSkySegmentation.so plugin"
	make -C $(PAPARAZZI_HOME)/sw/ext/ardrone2_vision/pprz_gst_plugins/ObstacleAvoidSkySegmentation upload

    </raw>
  </makefile>
</module>

